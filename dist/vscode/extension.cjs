"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m=require("vscode"),i=require("fs"),s=require("path"),h=require("js-yaml");function p(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const o in e)if(o!=="default"){const n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:()=>e[o]})}}return t.default=e,Object.freeze(t)}const a=p(m);let f={},d={},u={};function j(e){const t=i.existsSync(s.join(e.extensionPath,"prh-rules","swift.yml"))?s.join(e.extensionPath,"prh-rules","swift.yml"):s.join(e.extensionPath,"..","prh-rules","swift.yml"),o={};if(i.existsSync(t))try{const n=i.readFileSync(t,"utf8"),l=h.load(n);if(l.rules)for(const r of l.rules){const c=r.pattern.match(/^\/(.+)\/$/);if(c){const y=c[1];o[y]=r.expected}}console.log("âœ… PRH rules loaded:",Object.keys(o).length,"entries")}catch(n){console.warn("âš ï¸ Failed to load PRH rules:",n)}else console.warn("âš ï¸ prh-rules/swift.yml not found");return o}function P(e){const t=i.existsSync(s.join(e.extensionPath,"dict","terminology.json"))?s.join(e.extensionPath,"dict","terminology.json"):s.join(e.extensionPath,"..","dict","terminology.json");let o={};if(i.existsSync(t))try{o=JSON.parse(i.readFileSync(t,"utf8")),console.log("âœ… Terminology loaded:",Object.keys(o).length,"entries")}catch(n){console.warn("âš ï¸ Failed to load terminology:",n)}else console.warn("âš ï¸ terminology.json not found");return o}function g(e){d=j(e),f=P(e),u={...f,...d},console.log("âœ… Unified dictionary created:",Object.keys(u).length,"entries"),console.log("  - PRH rules:",Object.keys(d).length,"entries"),console.log("  - Terminology:",Object.keys(f).length,"entries")}function w(e){g(e);const t=a.languages.registerHoverProvider("markdown",{provideHover(n,l){const r=n.getText(n.getWordRangeAtPosition(l));if(u[r]){const c=d[r]?"PRH":"Terminology";return new a.Hover(`ðŸ’¡ **${r}** â†’ ã€Œ${u[r]}ã€ (${c})`)}return null}}),o=a.commands.registerCommand("swiftDocsJA.reloadTerminology",()=>{g(e),a.window.showInformationMessage("Unified dictionary reloaded!")});e.subscriptions.push(t,o)}function v(){}exports.activate=w;exports.deactivate=v;
